<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoenix Eye | Perfil</title>
    <link rel="stylesheet" href="Styles/Perfil.css">
</head>

<body>
    <div class="container">

        <div class="lateral">


            <a onclick="mostrarPerfil()">
                <div id="Perfil">
                    <img src="Assets/Icons/Perfil-Orgao.png">
                    <h1>Perfil</h1>
                </div>
            </a>

            <a onclick="mostrarOrgao()">
                <div id="orgao">
                    <img src="Assets/Icons/Prédio_órgão.png">
                    <h1>Órgãos</h1>
                </div>
            </a>

            <a onclick="mostrarAPAs()">
                <div id="APA">
                    <img src="Assets/Icons/Floresta.png">
                    <h1>APAs</h1>
                </div>
            </a>

            <a onclick="mostrarSolicitacoes()">
                <div id="solicitacoes">
                    <img src="Assets/Icons/solicitação.png">
                    <h1>Solicitações</h1>
                </div>
            </a>

        </div>
            <!-- Aqui fica as divs De cadastro tanto de apa quanto de func -->
        <div class="Central" id="central">

            <div class="cadastros" id="cadastros">
                <div class="cadastros_funcionarios" id="cadastro_orgao">
                    <div>
                        <h1>Adicionar os dados do seu funcionário:</h1>
                        <input type="text" placeholder="Nome:" id="input_nome">
                        <input type="text" placeholder="Email:" id="input_email">
                        <input type="text" placeholder="Senha:" id="input_senha">
                        <div>
                            <a onclick="ocultarCadastros()" style="cursor: pointer;">
                                <img src="Assets/Icons/seta.webp">
                            </a>
                            <button onclick="Cadastrar()">Cadastrar</button>
                            <div></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Parte do perfil em si -->
            <div class="dados" id="dados">
                <div class="top_dados">
                    <img src="Assets/Icons/Perfil_dado.png">
                    <h1 id="titulo_func">Olá, </h1>
                </div>

                <div class="Centro_dados">
                    <div class="Dados_Cadastrados">
                        <div id="dados_e_adm">
                            <h1 id="titulo_dados">Dados:</h1>    
                            <h1 id="titulo_adm">Administrador</h1>
                        </div>
                        <h1 id="nome_func">Nome:</h1>
                        <h1 id="email_func">Email:</h1>
                    </div>
                </div>
            </div>

            <div class="org" id="org">

                <div class="Funcionario_Acoes">
                    <div onclick="abrirCadastroOrgao()" style="cursor: pointer;">
                        <img src="Assets/Icons/adicionar.png">
                        <h1>Adicionar</h1>
                    </div>
                </div>

                <div class="Lista_Funcionario">

                    <div class="Indicadores">
                        <h1>Órgão</h1>
                        <h1>Email</h1>
                        <h1>Senha</h1>
                        <div></div>
                    </div>

                    <div class="listagem_Funcionarios" id="listagem_Orgao">
                        
                    </div>

                </div>

            </div>

            <!-- Parte das APAs -->
            <div class="APAs" id="APAs">
                <div id="titulo_pagina_apa">
                    <h1>APAs</h1>
                </div>

                <div class="Lista_APAs">

                    <div class="Indicadores_APAs_adm">
                        <div class="nula"></div>
                        <h1>Nome</h1>
                        <h1>Órgão</h1>
                        <div></div>
                    </div>

                    <div class="listagem_APAs_adm">
                        <div>
                            <img src="Assets/Imgs/img-Satelite.jpg" class="imagem_APA">
                            <p id="nome_adm">Juan Vieira</p>
                            <p id="nome_orgao_adm">Corpo de Bombeiros</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Parte das Solicitações -->
            <div class="solicitacao" id="solicitacao">
                <div id="titulo_pagina_solicitacao">
                    <h1>Solicitações</h1>
                </div>

                <div class="Lista_solicitacao">

                    <div class="Indicadores_solicitacao">
                        <div class="nula"></div>
                        <h1>Nome</h1>
                        <h1>Órgão</h1>
                        <h1>Confirmação</h1>
                        <div></div>
                    </div>

                    <div class="listagem_solicitacao">
                        <div>
                            <img src="Assets/Imgs/img-Satelite.jpg" class="imagem_APA">
                            <p id="nome_responsavel">Juan Vieira</p>
                            <p id="nome_orgao">Corpo de Bombeiros</p>
                            <div id="confirmacao_apa">
                                <img src="Assets/Icons/confirmar.png">
                                <img src="Assets/Icons/recusar.png">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>

<script>
    var funcionario = sessionStorage.idUsuario
        function dadosperfil_adm(){
        fetch(`/perfil/dadosperfil_func/${funcionario}`,{
            method : "GET",
            headers :{ "Content-Type": "application/json"}
        })
        .then(resposta=>{resposta.json().then(resposta=>{
            titulo_func.innerHTML +=resposta[0].nome
            nome_func.innerHTML+=resposta[0].nome
            email_func.innerHTML+=resposta[0].email
            })            
        })
        .catch(erro=>{
            console.log(erro)
        })
    }
    
    async function listarorgao(){
        
        listagem_Orgao.innerHTML=""
        const dados = await fetch(`/perfil/listarorgao`)
        const orgaos = await dados.json()
        for (orgao of orgaos){
            listagem_Orgao.innerHTML+=`
            <div>
                <p >${orgao.orgao}</p>
                <p>${orgao.email}</p>
                <p>${orgao.senha}</p>
                <div >
                    <img src="Assets/Icons/Lixeira.png">
                </div>
            </div>
            `
        }
    }

    function mostrarPerfil() {
        var solicitacoes = document.querySelector("#solicitacoes")
        var Perfil = document.querySelector("#Perfil")
        var APA = document.querySelector("#APA")
        var orgao = document.querySelector("#orgao")
        dados.style.display = "flex";
        APAs.style.display = "none";
        org.style.display = "none"
        solicitacao.style.display = "none";
        Perfil.style.backgroundColor = "#024002";
        APA.style.backgroundColor = "transparent";
        orgao.style.backgroundColor = "transparent";
        solicitacoes.style.backgroundColor = "transparent";
        cadastros.style.display = "none"

    }

    function mostrarOrgao() {
        var solicitacoes = document.querySelector("#solicitacoes")
        var Perfil = document.querySelector("#Perfil")
        var APA = document.querySelector("#APA")
        var orgao = document.querySelector("#orgao")
        dados.style.display = "none";
        APAs.style.display = "none";
        org.style.display = "flex";
        solicitacao.style.display = "none";
        Perfil.style.backgroundColor = "transparent";
        APA.style.backgroundColor = "transparent";
        orgao.style.backgroundColor = "#024002";
        solicitacoes.style.backgroundColor = "transparent";
        cadastros.style.display = "none"
        
        listarorgao()
    }

    function mostrarAPAs() {
        var solicitacoes = document.querySelector("#solicitacoes")
        var Perfil = document.querySelector("#Perfil")
        var APA = document.querySelector("#APA")
        var orgao = document.querySelector("#orgao")
        dados.style.display = "none";
        APAs.style.display = "flex";
        org.style.display = "none";
        solicitacao.style.display = "none";
        Perfil.style.backgroundColor = "transparent";
        APA.style.backgroundColor = "#024002";
        orgao.style.backgroundColor = "transparent";
        solicitacoes.style.backgroundColor = "transparent";
        cadastros.style.display = "none"

    }

    function mostrarSolicitacoes() {
        var solicitacoes = document.querySelector("#solicitacoes")
        var Perfil = document.querySelector("#Perfil")
        var APA = document.querySelector("#APA")
        var orgao = document.querySelector("#orgao")
        dados.style.display = "none";
        APAs.style.display = "none";
        org.style.display = "none";
        solicitacao.style.display = "flex";
        Perfil.style.backgroundColor = "transparent";
        APA.style.backgroundColor = "transparent";
        orgao.style.backgroundColor = "transparent";
        solicitacoes.style.backgroundColor = "#024002";
        cadastros.style.display = "none"
    }

    function abrirCadastroOrgao(){
        cadastro_orgao.style.display = "flex"
        cadastros.style.display = "flex"
    }

    mostrarPerfil();
    dadosperfil_adm()

</script>